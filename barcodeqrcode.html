<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generatore QR Code & Barcode</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jsbarcode/3.6.0/JsBarcode.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
</head>
<body>

    <header>
        <h1>Generatore QR Code & Barcode</h1>
        <p>Crea facilmente codici QR e barcode online.</p>
    </header>

    <nav>
        <a href="index.html">Home</a>
        <a href="info.html">Info</a>
        <a href="barcodeqrcode.html">QR & Barcode</a>
    </nav>

    <main>
        <section class="generator-container">
            <h2>Genera il tuo codice</h2>
            <label for="inputText">Inserisci il testo:</label>
            <input type="text" id="inputText" placeholder="Inserisci il testo da convertire..." autofocus>

            <div class="button-container">
                <button onclick="generateQRCode()">ðŸ“± Genera QR Code</button>
                <button onclick="generateBarcode()">ðŸ“Š Genera Barcode</button>
                <button onclick="saveQRCode()">ðŸ’¾ Salva QR Code</button>
                <button onclick="saveBarcode()">ðŸ’¾ Salva Barcode</button>
                <button class="clear-btn" onclick="clearPage()">ðŸ§¹ Pulisci</button>
            </div>

            <div id="qrCodeDiv"></div>
            <div id="barcodeDiv"></div>
            <div id="logDiv"></div>
        </section>
    </main>

    <footer>
        <p>&copy; <span class="year">2025</span> <strong>TICoding</strong> - Tutti i diritti riservati</p>
    </footer>

    <script>
        var qrCodeText = '';

        function generateQRCode() {
            var inputText = document.getElementById('inputText').value;
            var logDiv = document.getElementById('logDiv');

            if (inputText.trim() !== '') {
                var qrCodeDiv = document.getElementById('qrCodeDiv');
                qrCodeDiv.innerHTML = '';

                var qr = new QRCode(qrCodeDiv, {
                    text: inputText,
                    width: 200,
                    height: 200
                });

                qrCodeText = inputText;
                logDiv.innerText = 'QR Code generato correttamente!';
            } else {
                logDiv.innerText = 'Inserisci un testo valido.';
            }
        }

        function generateBarcode() {
            var inputText = document.getElementById('inputText').value;
            var logDiv = document.getElementById('logDiv');

            if (inputText.trim() !== '') {
                var barcodeDiv = document.getElementById('barcodeDiv');
                barcodeDiv.innerHTML = '';

                try {
                    var canvas = document.createElement('canvas');
                    barcodeDiv.appendChild(canvas);

                    JsBarcode(canvas, inputText, {
                        format: 'CODE128',
                        width: 2,
                        height: 80
                    });

                    logDiv.innerText = 'Barcode generato correttamente!';
                } catch (error) {
                    logDiv.innerText = 'Errore nella generazione del barcode: ' + error.message;
                }
            } else {
                logDiv.innerText = 'Inserisci un testo valido.';
            }
        }

        function saveQRCode() {
            if (qrCodeText.trim() !== '') {
                var qrCodeCanvas = document.getElementById('qrCodeDiv').getElementsByTagName('canvas')[0];
                qrCodeCanvas.toBlob(function (blob) {
                    saveAs(blob, 'QRCode.png');
                });
            } else {
                document.getElementById('logDiv').innerText = 'Nessun QR code da salvare.';
            }
        }

        function saveBarcode() {
            var barcodeDiv = document.getElementById('barcodeDiv');

            if (barcodeDiv.innerHTML.trim() !== '') {
                var barcodeCanvas = barcodeDiv.getElementsByTagName('canvas')[0];
                barcodeCanvas.toBlob(function (blob) {
                    saveAs(blob, 'Barcode.png');
                });
            } else {
                document.getElementById('logDiv').innerText = 'Nessun barcode da salvare.';
            }
        }

        function clearPage() {
            document.getElementById('inputText').value = '';
            document.getElementById('qrCodeDiv').innerHTML = '';
            document.getElementById('barcodeDiv').innerHTML = '';
            document.getElementById('logDiv').innerText = '';
            qrCodeText = '';
        }
    </script>

</body>
</html>
